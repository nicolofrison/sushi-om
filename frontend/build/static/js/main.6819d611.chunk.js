(this["webpackJsonpsushi-om"]=this["webpackJsonpsushi-om"]||[]).push([[0],{165:function(e,t,n){},166:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(49),i=n.n(s),c=(n(165),n(166),n(12)),o=n(136),d=n(255),l=n(261),u=n(252),j=n(246),h=n(250),b=n(14),O=n(15),p=n(32),m=n(146),f=n(52),x=n(19),g=n(20),v=n(241),y=n(33),k=n.n(y),w=function(){function e(){Object(b.a)(this,e),this.baseUrl="".concat("http://206.189.53.141",":").concat("8080","/")}return Object(O.a)(e,[{key:"config",value:function(e){return{headers:{Authorization:e,"Content-Type":"application/json; charset=utf-8"}}}}]),e}(),S=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"signUp",value:function(e){return k.a.post(this.baseUrl+"auth/register",e)}},{key:"getUser",value:function(e,t){return k.a.get(this.baseUrl+"users/"+t,this.config(e))}},{key:"updateUserConfirmation",value:function(e,t,n){return k.a.patch(this.baseUrl+"users/"+t,{confirmed:n},this.config(e))}}],[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}}]),n}(w);S.instance=void 0;var C=S.getInstance(),I=function(){function e(){Object(b.a)(this,e)}return Object(O.a)(e,null,[{key:"getUser",value:function(){var e=localStorage.getItem("user");if(!e)return null;var t=JSON.parse(e);return console.debug(t),t.accessToken?t:(this.removeUser(),null)}},{key:"getToken",value:function(){var e=this.getUser();return e?e.accessToken:null}},{key:"IsLoggedIn",value:function(){return null!=this.getUser()}},{key:"removeUser",value:function(){localStorage.removeItem("user")}},{key:"setUser",value:function(e){localStorage.setItem("user",JSON.stringify(e))}}]),e}(),T=function(){function e(){Object(b.a)(this,e),this.setAlertVisibleTimeout=void 0,this.setAlertVisible=void 0,this.setAlertText=void 0,this.setAlertType=void 0}return Object(O.a)(e,[{key:"init",value:function(e,t,n){this.setAlertVisible=e,this.setAlertText=t,this.setAlertType=n}},{key:"showAlert",value:function(e,t){var n=this;this.setAlertVisibleTimeout&&window.clearTimeout(this.setAlertVisibleTimeout),this.setAlertText&&this.setAlertType&&this.setAlertVisible&&(this.setAlertVisible(!1),this.setAlertText(e),this.setAlertType(t),this.setAlertVisible(!0),window.setTimeout((function(){return n.setAlertVisible?n.setAlertVisible(!1):{}}),5e3))}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();T.instance=void 0;var A,L,U,N,E=T.getInstance();!function(e){e[e.user=0]="user",e[e.group=1]="group",e[e.submit=2]="submit"}(A||(A={})),function(e){e[e.create=0]="create",e[e.join=1]="join"}(L||(L={})),function(e){e[e.user=0]="user",e[e.group=1]="group",e[e.all=2]="all"}(U||(U={})),function(e){e.info="info",e.success="success",e.warning="warning",e.error="error"}(N||(N={}));var W={firstName:"firstName",lastName:"lastName",username:"username",createGroup:"createGroup",joinGroup:"joinGroup",groupName:"groupName",groupPassword:"groupPassword",continue:"continue",code:"code",amount:"amount",users:"users",actions:"actions",remove:"remove",add:"add",userOrders:"userOrders",groupOrders:"groupOrders",allConfirmedOrders:"allConfirmedOrders",subtract:"subtract",round:"round",expiredAuthenticationToken:"expiredAuthenticationToken",authenticationError:"authenticationError",missingOrWrongAuthenticationToken:"missingOrWrongAuthenticationToken",wrongAuthenticationToken:"wrongAuthenticationToken",info:"info",success:"success",warning:"warning",error:"error",orderAddedSuccessfully:"orderAddedSuccessfully",orderEditedSuccessfully:"orderEditedSuccessfully",orderRemovedSuccessfully:"orderRemovedSuccessfully",confirm:"confirm",undoConfirm:"undoConfirm",checked:"checked",ordersEmpty:"ordersEmpty",groupAlreadyExists:"groupAlreadyExists",groupDoesNotExists:"groupDoesNotExists",groupDoesNotExistsOrWrongPassword:"groupDoesNotExistsOrWrongPassword",orderAlreadyConfirmedCannotEdit:"orderAlreadyConfirmedCannotEdit",orderDoesNotExists:"orderDoesNotExists",userAlreadyExistsInGroup:"userAlreadyExistsInGroup",userDoesNotExists:"userDoesNotExists",internalServerError:"internalServerError",orderIsNotConfirmed:"orderIsNotConfirmed",orderCheckedSuccessfully:"orderCheckedSuccessfully",language:"language",ordersToShow:"ordersToShow",cart:"cart"};function F(e){return e.charAt(0).toUpperCase()+e.slice(1)}function D(e){if(k.a.isAxiosError(e)){var t,n,r,a;console.error(e);var s=e.response,i=null!==(t=null!==(n=null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.translationKey)&&void 0!==n?n:null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)&&void 0!==t?t:e.message;E.showAlert(i,N.error),!I.IsLoggedIn()||i!==W.authenticationError&&i!==W.expiredAuthenticationToken&&i!==W.missingOrWrongAuthenticationToken||setTimeout((function(){I.removeUser(),window.location.reload()}),3e3)}else console.error(e),E.showAlert(e.message,N.error)}var P=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"addOrder",value:function(e,t){return k.a.post(this.baseUrl+"orders",t,this.config(e))}},{key:"getOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=t>-1?"groupId=".concat(t):"";return r=(r+=n>-1?(r.length>0?"&":"")+"userId=".concat(n):"").length>0?"?".concat(r):"",k.a.get(this.baseUrl+"orders"+r,this.config(e))}},{key:"deleteOrder",value:function(e,t){return k.a.delete("".concat(this.baseUrl,"orders/").concat(t),this.config(e))}},{key:"updateOrderAmount",value:function(e,t,n){return k.a.patch("".concat(this.baseUrl,"orders/").concat(t),{amount:n},this.config(e))}},{key:"updateOrderChecked",value:function(e,t,n){return k.a.patch("".concat(this.baseUrl,"orders/").concat(t),{checked:n},this.config(e))}}],[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}}]),n}(w);P.instance=void 0;var G=P.getInstance(),V=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"updateOrders",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=I.getUser();null!=r?(this.setState({isLoading:!0}),G.getOrders(r.accessToken,n,t).then((function(t){var n=t.data,r=n.sort((function(e,t){var n=e.round-t.round;return 0!==n?n:e.code-t.code}));console.log(r),e.setState({orders:n,isLoading:!1})})).catch((function(t){D(t),e.setState({isLoading:!1})}))):window.location.reload()}},{key:"componentDidMount",value:function(){this.updateOrders()}}]),n}(a.a.Component),R=n(269),q=n(268),z=n(262),M=n(265),J=n(267),B=n(258),K=n(264),Y=n(266),H=n(257),Q=n(4),X=n(263),Z=n(134),$=n.n(Z),_=n(251),ee=n(0),te=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state={code:"",amount:""},r}return Object(O.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target;if(null!=t){var n="checkbox"===t.type?t.checked:t.value,r=t.name;this.setState(Object(Q.a)({},r,n))}}},{key:"addOrder",value:function(){var e=this;if(!(""===this.state.code||""===this.state.amount||this.state.amount<1)){var t={code:this.state.code,amount:+this.state.amount};console.debug(this.state.amount);var n=I.getToken();null!=n&&G.addOrder(n,t).then((function(t){console.debug(t.data),E.showAlert(W.orderAddedSuccessfully,N.success),e.setState({code:"",amount:0}),e.props.updateOrders()})).catch(D)}}},{key:"render",value:function(){var e=this.props.t;return Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{align:"center",children:Object(ee.jsx)(_.a,{autoComplete:"code",name:"code",variant:"outlined",required:!0,disabled:this.props.ordersConfirmed,id:"code",label:e(W.code),fullWidth:!0,onChange:this.handleInputChange.bind(this),value:this.state.code})}),Object(ee.jsx)(B.a,{align:"center",children:Object(ee.jsx)(_.a,{autoComplete:"amount",name:"amount",variant:"outlined",required:!0,disabled:this.props.ordersConfirmed,fullWidth:!0,id:"amount",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},label:e(W.amount),onChange:this.handleInputChange.bind(this),value:this.state.amount})}),Object(ee.jsx)(B.a,{align:"center",children:Object(ee.jsx)(X.a,{disabled:this.props.ordersConfirmed,"aria-label":e(W.add),size:"large",onClick:this.addOrder.bind(this),children:Object(ee.jsx)($.a,{fontSize:"inherit",color:"success"})})})]},"add")}}]),n}(a.a.Component),ne=Object(v.a)("")(te),re=n(139),ae=n.n(re),se=n(243),ie=n(244),ce=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state={amount:e.amount,updateTimeoutId:null},r}return Object(O.a)(n,[{key:"updateOrder",value:function(){var e=this;if(null!==this.state.updateTimeoutId&&window.clearTimeout(this.state.updateTimeoutId),this.props.amount!==this.state.amount){var t=this.props.orderId,n=this.state.amount;console.debug("newAmount",this.state.amount);var r=I.getToken();null!=r?G.updateOrderAmount(r,t,n).then((function(t){console.debug(t.data),E.showAlert(W.orderEditedSuccessfully,N.success),e.props.updateOrders()})).catch(D):window.location.reload()}}},{key:"updateAmount",value:function(e){null!==this.state.updateTimeoutId&&window.clearTimeout(this.state.updateTimeoutId),this.setState({amount:this.state.amount+e,updateTimeoutId:window.setTimeout(this.updateOrder.bind(this),3e3)})}},{key:"handleAmountChange",value:function(e){var t=e.target;null!=t&&this.setState({amount:+t.value})}},{key:"render",value:function(){var e=this,t=this.props.t;return Object(ee.jsxs)(d.a,{container:!0,wrap:"nowrap",alignContent:"center",alignItems:"center",children:[Object(ee.jsx)(d.a,{"xs-item":2,children:Object(ee.jsx)(X.a,{"xs-item":2,"aria-label":t(W.subtract),onClick:this.updateAmount.bind(this,-1),children:Object(ee.jsx)(se.a,{color:"primary"})})}),Object(ee.jsx)(d.a,{"xs-item":6,children:Object(ee.jsx)(_.a,{autoComplete:"amount",name:"amount"+this.props.orderId,required:!0,id:"amount"+this.props.orderId,inputProps:{inputMode:"numeric",pattern:"[0-9]*",style:{textAlign:"center"}},label:t(W.amount),onBlur:function(t){console.debug("blur"),e.updateOrder()},onKeyDown:function(e){"Enter"===e.key&&(console.debug("enter"),e.target.blur())},onChange:this.handleAmountChange.bind(this),value:this.state.amount,variant:"standard"})}),Object(ee.jsx)(d.a,{"xs-item":2,children:Object(ee.jsx)(X.a,{"xs-item":2,"aria-label":t(W.add),onClick:this.updateAmount.bind(this,1),children:Object(ee.jsx)(ie.a,{color:"primary"})})})]})}}]),n}(a.a.Component),oe=Object(v.a)("")(ce);function de(e){var t,n=e.confirmed,r=e.orderRow,a=e.updateOrders,s=Object(o.a)().t,i=(null===(t=r.round)||void 0===t)&&!n;return Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{align:"center",children:r.code}),Object(ee.jsx)(B.a,{align:"center",children:i?Object(ee.jsx)(oe,{orderId:r.orderId,amount:r.amount,updateOrders:a}):r.amount}),Object(ee.jsx)(B.a,{align:"center",children:i&&Object(ee.jsx)(X.a,{"aria-label":s(W.remove),size:"large",onClick:function(){return function(){var e=I.getToken();null!=e?G.deleteOrder(e,r.orderId).then((function(e){console.debug(e.data),E.showAlert(W.orderRemovedSuccessfully,N.success),a()})).catch((function(e){D(e)})):window.location.reload()}()},children:Object(ee.jsx)(ae.a,{fontSize:"inherit",color:"error"})})})]},r.orderId)}var le=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(e){var r;Object(b.a)(this,n),r=t.call(this,e);var a=I.getUser();return null==a?(window.location.reload(),Object(p.a)(r)):(r.state={confirmed:a.confirmed},r)}return Object(O.a)(n,[{key:"updateUserConfirmation",value:function(){var e=this,t=!this.state.confirmed,n=I.getUser();null!=n?C.updateUserConfirmation(n.accessToken,n.userId,t).then((function(n){console.debug(n.data),e.props.updateOrders(),e.setState({confirmed:t})})).catch(D):window.location.reload()}},{key:"render",value:function(){var e=this,t=this.props.t,n=Object(ee.jsx)(H.a,{children:Object(ee.jsx)(B.a,{colSpan:3,align:"center",children:F(t(W.ordersEmpty))})});return this.props.orders.length>0&&(n=Object(ee.jsx)(a.a.Fragment,{children:this.props.orders.map((function(t){return Object(ee.jsx)(de,{confirmed:e.state.confirmed,orderRow:t,updateOrders:e.props.updateOrders})}))})),Object(ee.jsxs)(z.a,{square:!0,sx:{pb:"50px"},children:[Object(ee.jsx)(K.a,{component:z.a,children:Object(ee.jsxs)(M.a,{"aria-label":"simple table",children:[Object(ee.jsx)(Y.a,{children:Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{align:"center",children:F(t(W.code))}),Object(ee.jsx)(B.a,{align:"center",children:F(t(W.amount))}),Object(ee.jsx)(B.a,{align:"center",children:F(t(W.actions))})]})}),Object(ee.jsxs)(J.a,{children:[Object(ee.jsx)(ne,{updateOrders:this.props.updateOrders,ordersConfirmed:this.state.confirmed}),this.props.isLoading?Object(ee.jsx)(H.a,{children:Object(ee.jsx)(B.a,{colSpan:3,align:"center",children:Object(ee.jsx)(q.a,{})})}):n]})]})}),this.props.orders.length>0&&this.state.confirmed?Object(ee.jsx)(R.a,{fullWidth:!0,variant:"contained",disabled:0===this.props.orders.length,color:"error",onClick:function(){return e.updateUserConfirmation()},children:F(t(W.undoConfirm))}):Object(ee.jsx)(R.a,{fullWidth:!0,variant:"contained",disabled:0===this.props.orders.length,color:"success",onClick:function(){return e.updateUserConfirmation()},children:F(t(W.confirm))})]})}}]),n}(a.a.Component),ue=Object(v.a)("")(le),je=n(248);function he(e){var t=e.orderRow,n=e.setIsLoading,r=e.updateOrders;return Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{children:Object(ee.jsx)(je.a,{name:"check-"+t.orderId,checked:t.checked,onChange:function(e){var a=e.target;if(null!=a){var s="checkbox"===a.type?a.checked:a.value,i=I.getToken();if(null==i)return void window.location.reload();n(!0),G.updateOrderChecked(i,t.orderId,s).then((function(e){console.debug(e.data),E.showAlert(W.orderCheckedSuccessfully,N.success),r()})).catch((function(e){D(e),n(!1)}))}}})}),Object(ee.jsx)(B.a,{align:"center",component:"th",scope:"row",children:t.round}),Object(ee.jsx)(B.a,{align:"center",children:t.code}),Object(ee.jsx)(B.a,{align:"center",children:t.amount})]},t.orderId)}var be,Oe=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(b.a)(this,n),r=t.call(this,e),null==I.getUser()?(window.location.reload(),Object(p.a)(r)):(r.state={},r)}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.props.t,n=Object(ee.jsx)(H.a,{children:Object(ee.jsx)(B.a,{colSpan:4,align:"center",children:F(t(W.ordersEmpty))})});return this.props.orders.length>0&&(n=Object(ee.jsx)(a.a.Fragment,{children:this.props.orders.map((function(t){return Object(ee.jsx)(he,{orderRow:t,setIsLoading:e.props.setIsLoading,updateOrders:e.props.updateOrders})}))})),Object(ee.jsx)(K.a,{component:z.a,children:Object(ee.jsxs)(M.a,{"aria-label":"simple table",children:[Object(ee.jsx)(Y.a,{children:Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{align:"center",width:"10%",children:F(t(W.checked))}),Object(ee.jsx)(B.a,{align:"center",width:"10%",children:F(t(W.round))}),Object(ee.jsx)(B.a,{align:"center",children:F(t(W.code))}),Object(ee.jsx)(B.a,{align:"center",children:F(t(W.amount))})]})}),Object(ee.jsx)(J.a,{children:this.props.isLoading?Object(ee.jsx)(H.a,{children:Object(ee.jsx)(B.a,{colSpan:4,align:"center",children:Object(ee.jsx)(q.a,{})})}):n})]})})}}]),n}(a.a.Component),pe=Object(v.a)("")(Oe);!function(e){e[e.cart=-1]="cart",e[e.allConfirmed=0]="allConfirmed"}(be||(be={}));var me=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(e){var r;Object(b.a)(this,n),r=t.call(this,e);var a=I.getUser();return null==a?(window.location.reload(),Object(p.a)(r)):(r.state={orders:[],isLoading:!1,confirmed:a.confirmed,round:be.cart},r)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.updateOrders()}},{key:"updateOrders",value:function(){var e=I.getUser();null!=e?(Object(m.a)(Object(f.a)(n.prototype),"updateOrders",this).call(this,e.userId),this.updateConfirmed()):window.location.reload()}},{key:"updateConfirmed",value:function(){var e=this,t=I.getUser();null!=t?C.getUser(t.accessToken,t.userId).then((function(n){console.debug(n.data);var r=n.data;e.setUserConfirmation(t,r.confirmed)})).catch(D):window.location.reload()}},{key:"setUserConfirmation",value:function(e,t){e.confirmed=t,I.setUser(e),this.setState({confirmed:t})}},{key:"setIsLoading",value:function(e){this.setState({isLoading:e})}},{key:"render",value:function(){var e=this,t=this.props.t;return Object(ee.jsxs)("div",{children:[Object(ee.jsxs)(l.a,{variant:"filled",fullWidth:!0,children:[Object(ee.jsx)(u.a,{id:"ordersToShowSelectLabel",children:F(t(W.ordersToShow))}),Object(ee.jsxs)(j.a,{id:"ordersToShowSelect",labelId:"ordersToShowSelectLabel",value:this.state.round.toString(),onChange:function(t){var n=parseInt(t.target.value,10);e.setState({round:n})},children:[Object(ee.jsx)(h.a,{value:be.cart,children:F(t(W.cart))},be.cart),Object(ee.jsx)(h.a,{value:be.allConfirmed,children:F(t(W.allConfirmedOrders))},be.allConfirmed),this.state.orders.map((function(e){return e.round})).filter((function(e,t,n){return e&&n.indexOf(e)===t})).map((function(e){return Object(ee.jsx)(h.a,{value:e,children:F(t(W.round))+" "+e},e)}))]})]}),this.state.round===be.cart&&Object(ee.jsx)(ue,{isLoading:this.state.isLoading,orders:this.state.orders.filter((function(e){return!e.round})),setIsLoading:this.setIsLoading.bind(this),updateOrders:this.updateOrders.bind(this)}),this.state.round!==be.cart&&Object(ee.jsx)(pe,{isLoading:this.state.isLoading,orders:this.state.orders.filter((function(t){return t.round&&(e.state.round===be.allConfirmed||t.round===e.state.round)})),setIsLoading:this.setIsLoading.bind(this),updateOrders:this.updateOrders.bind(this)})]})}}]),n}(V),fe=Object(v.a)("")(me),xe=n(16),ge=n(270),ve=n(271),ye=n(272),ke=n(69),we=n.n(ke),Se=n(92),Ce=n.n(Se),Ie=n(93),Te=n.n(Ie),Ae=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(b.a)(this,n),r=t.call(this,e),null==I.getUser()?(window.location.reload(),Object(p.a)(r)):(r.state={orders:[],isLoading:!1},r)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.updateOrders()}},{key:"updateOrders",value:function(){var e=this,t=I.getUser();if(null!=t){this.setState({isLoading:!0});var n=t.groupId;G.getOrders(t.accessToken,n,-1).then((function(t){e.setState({orders:t.data.filter((function(e){return e.round})),isLoading:!1}),console.debug(t.data)})).catch((function(t){D(t),e.setState({isLoading:!1})}))}else window.location.reload()}},{key:"usersTable",value:function(){var e=this.props.t;if(0===this.state.orders.length)return F(e(W.ordersEmpty));var t=[];return this.state.orders.forEach((function(e){var n,r=null!==(n=e.username)&&void 0!==n?n:e.name+" "+e.surname;t[r]=[].concat(Object(xe.a)(t[r]||[]),[e])})),Object(ee.jsx)(K.a,{component:z.a,children:Object(ee.jsxs)(M.a,{"aria-label":"collapsible table",children:[Object(ee.jsx)(Y.a,{children:Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{width:"10%"}),Object(ee.jsx)(B.a,{width:"10%",children:e(F(W.checked))}),Object(ee.jsx)(B.a,{children:e(F(W.username))})]})}),Object(ee.jsx)(J.a,{children:Object.entries(t).map((function(e){return Object(ee.jsx)(Le,{userRow:e})}))})]})})}},{key:"render",value:function(){var e=this.state.isLoading?Object(ee.jsx)(q.a,{}):this.usersTable();return Object(ee.jsx)(ge.a,{justifyContent:"center",children:e})}}]),n}(V);function Le(e){var t=e.userRow,n=a.a.useState(!1),r=Object(c.a)(n,2),s=r[0],i=r[1],o=t[0],d=t[1],l=d.every((function(e){return e.checked})),u=Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{children:Object(ee.jsx)(X.a,{"aria-label":"expand row",size:"small",onClick:function(){return i(!s)},children:s?Object(ee.jsx)(Ce.a,{}):Object(ee.jsx)(Te.a,{})})}),Object(ee.jsx)(B.a,{align:"center",children:l&&Object(ee.jsx)(we.a,{color:"success"})}),Object(ee.jsx)(B.a,{component:"th",scope:"row",children:o})]}),j=Object(ee.jsx)(H.a,{children:Object(ee.jsx)(B.a,{colSpan:3,children:Object(ee.jsx)(ve.a,{in:s,timeout:"auto",unmountOnExit:!0,children:Object(ee.jsxs)(ge.a,{children:[Object(ee.jsx)(ye.a,{variant:"h6",children:"Orders"}),Object(ee.jsx)(Ue,{userOrders:d})]})})})});return Object(ee.jsxs)(a.a.Fragment,{children:[u,j]})}function Ue(e){var t=Object(o.a)().t,n=e.userOrders;return Object(ee.jsx)(K.a,{component:z.a,children:Object(ee.jsxs)(M.a,{"aria-label":"simple table",children:[Object(ee.jsx)(Y.a,{children:Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{width:"10%",align:"center",children:F(t(W.checked))}),Object(ee.jsx)(B.a,{width:"10%",align:"center",children:F(t(W.round))}),Object(ee.jsx)(B.a,{align:"center",children:F(t(W.code))}),Object(ee.jsx)(B.a,{align:"center",children:F(t(W.amount))})]})}),Object(ee.jsx)(J.a,{children:n.map((function(e){return Object(ee.jsx)(Ne,{userOrder:e})}))})]})})}function Ne(e){var t=e.userOrder;return Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{align:"center",children:t.checked&&Object(ee.jsx)(we.a,{color:"success"})}),Object(ee.jsx)(B.a,{align:"center",component:"th",scope:"row",children:t.round}),Object(ee.jsx)(B.a,{align:"center",children:t.code}),Object(ee.jsx)(B.a,{align:"center",children:t.amount})]},t.orderId)}var Ee=Object(v.a)("")(Ae),We=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(b.a)(this,n),r=t.call(this,e),null==I.getUser()?(window.location.reload(),Object(p.a)(r)):(r.state={orders:[],isLoading:!1,expandedCode:""},r)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.updateOrders()}},{key:"updateOrders",value:function(){var e=this,t=I.getUser();if(null!=t){this.setState({isLoading:!0});var n=t.groupId;G.getOrders(t.accessToken,n,-1).then((function(t){e.setState({orders:t.data.filter((function(e){return e.round})),isLoading:!1}),console.debug(t.data)})).catch((function(t){D(t),e.setState({isLoading:!1})}))}else window.location.reload()}},{key:"codesTable",value:function(){var e=this.props.t;if(0===this.state.orders.length)return F(e(W.ordersEmpty));var t=[];return this.state.orders.forEach((function(e){var n=e.code;t[n]=[].concat(Object(xe.a)(t[n]||[]),[e])})),Object(ee.jsx)(K.a,{component:z.a,children:Object(ee.jsxs)(M.a,{"aria-label":"collapsible table",children:[Object(ee.jsx)(Y.a,{children:Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{width:"10%"}),Object(ee.jsx)(B.a,{width:"10%",children:e(F(W.checked))}),Object(ee.jsx)(B.a,{align:"center",children:e(F(W.code))}),Object(ee.jsx)(B.a,{align:"center",children:e(F(W.amount))})]})}),Object(ee.jsx)(J.a,{children:Object.entries(t).map((function(e){return Object(ee.jsx)(Fe,{codeRow:e})}))})]})})}},{key:"render",value:function(){var e=this.state.isLoading?Object(ee.jsx)(q.a,{}):this.codesTable();return Object(ee.jsx)(ge.a,{justifyContent:"center",children:e})}}]),n}(V);function Fe(e){var t=e.codeRow,n=a.a.useState(!1),r=Object(c.a)(n,2),s=r[0],i=r[1],o=t[0],d=t[1],l=0;d.forEach((function(e){l+=e.amount}));var u=d.every((function(e){return e.checked})),j=Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{children:Object(ee.jsx)(X.a,{"aria-label":"expand row",size:"small",onClick:function(){return i(!s)},children:s?Object(ee.jsx)(Ce.a,{}):Object(ee.jsx)(Te.a,{})})}),Object(ee.jsx)(B.a,{align:"center",children:u&&Object(ee.jsx)(we.a,{color:"success"})}),Object(ee.jsx)(B.a,{align:"center",component:"th",scope:"row",children:o}),Object(ee.jsx)(B.a,{align:"center",children:l})]}),h=Object(ee.jsx)(H.a,{children:Object(ee.jsx)(B.a,{colSpan:4,children:Object(ee.jsx)(ve.a,{in:s,timeout:"auto",unmountOnExit:!0,children:Object(ee.jsxs)(ge.a,{children:[Object(ee.jsx)(ye.a,{variant:"h6",children:"Orders"}),Object(ee.jsx)(De,{usersOrders:d})]})})})});return Object(ee.jsxs)(a.a.Fragment,{children:[j,h]})}function De(e){var t=Object(o.a)().t,n=e.usersOrders;return Object(ee.jsx)(K.a,{component:z.a,children:Object(ee.jsxs)(M.a,{"aria-label":"simple table",children:[Object(ee.jsx)(Y.a,{children:Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{align:"center",width:"10%",children:F(t(W.checked))}),Object(ee.jsx)(B.a,{align:"center",width:"10%",children:F(t(W.round))}),Object(ee.jsx)(B.a,{align:"center",children:F(t(W.username))}),Object(ee.jsx)(B.a,{align:"center",children:F(t(W.amount))})]})}),Object(ee.jsx)(J.a,{children:n.map((function(e){return Object(ee.jsx)(Pe,{userOrder:e})}))})]})})}function Pe(e){var t,n=e.userOrder,r=null!==(t=n.username)&&void 0!==t?t:n.name+" "+n.surname;return Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)(B.a,{align:"center",children:n.checked&&Object(ee.jsx)(we.a,{color:"success"})}),Object(ee.jsx)(B.a,{align:"center",component:"th",scope:"row",children:n.round}),Object(ee.jsx)(B.a,{align:"center",children:r}),Object(ee.jsx)(B.a,{align:"center",children:n.amount})]},n.orderId)}var Ge=Object(v.a)("")(We);function Ve(){var e=Object(o.a)().t,t=Object(r.useState)(U.user),n=Object(c.a)(t,2),a=n[0],s=n[1],i=Object(ee.jsx)(fe,{});switch(a){case U.user:i=Object(ee.jsx)(fe,{});break;case U.group:i=Object(ee.jsx)(Ee,{});break;case U.all:i=Object(ee.jsx)(Ge,{})}return Object(ee.jsxs)(d.a,{container:!0,spacing:2,children:[Object(ee.jsx)(d.a,{item:!0,xs:12,children:Object(ee.jsxs)(l.a,{variant:"filled",fullWidth:!0,children:[Object(ee.jsx)(u.a,{id:"ordersListTypeLabel",children:"Orders list type"}),Object(ee.jsxs)(j.a,{labelId:"ordersListTypeLabel",id:"ordersListType",value:a.toString(),label:"Orders list type",onChange:function(e){var t=e.target.value;s(parseInt(t,10))},children:[Object(ee.jsx)(h.a,{value:U.user,children:F(e(W.userOrders))}),Object(ee.jsx)(h.a,{value:U.group,children:F(e(W.groupOrders))}),Object(ee.jsx)(h.a,{value:U.all,children:F(e(W.allConfirmedOrders))})]})]})}),Object(ee.jsx)(d.a,{item:!0,xs:12,children:i})]})}var Re=n(256),qe=n(245),ze=n(273),Me=n(140),Je=n.n(Me),Be=n(274);function Ke(e){var t=Object(o.a)().t,n=function(t){var n=t.target;if(null!=n){var r=n.value;switch(n.name){case"firstName":e.SetFirstName(r);break;case"lastName":e.SetLastName(r);break;case"username":e.SetUsername(r);break;default:console.error("The input is not managed")}}};return Object(ee.jsxs)("div",{children:[Object(ee.jsx)(ye.a,{component:"h1",variant:"h5",children:"Sign up - user info"}),Object(ee.jsxs)("form",{noValidate:!0,onSubmit:function(){e.SetStep(A.group)},children:[Object(ee.jsxs)(d.a,{container:!0,spacing:2,children:[Object(ee.jsx)(d.a,{item:!0,xs:12,sm:6,children:Object(ee.jsx)(_.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:t(W.firstName),autoFocus:!0,onChange:n})}),Object(ee.jsx)(d.a,{item:!0,xs:12,sm:6,children:Object(ee.jsx)(_.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:t(W.lastName),name:"lastName",autoComplete:"lname",onChange:n})}),Object(ee.jsx)(d.a,{item:!0,xs:12,children:Object(ee.jsx)(_.a,{variant:"outlined",fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:t(W.username),onChange:n})})]}),Object(ee.jsx)(R.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:t(W.continue)})]})]})}var Ye=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).state={groupName:"",groupPassword:"",formType:L.create},r}return Object(O.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target;if(null!=t){var n="checkbox"===t.type?t.checked:t.value,r=t.name;this.setState(Object(Q.a)({},r,n))}}},{key:"handleFormType",value:function(e){this.props.SetGroupName(this.state.groupName),this.props.SetGroupPassword(this.state.groupPassword),this.props.SetFormType(e),this.props.SetStep(A.submit)}},{key:"render",value:function(){var e=this.props.t;return Object(ee.jsxs)("div",{children:[Object(ee.jsx)(ye.a,{component:"h1",variant:"h5",children:"Sign up - group info"}),Object(ee.jsx)("form",{noValidate:!0,children:Object(ee.jsxs)(d.a,{container:!0,spacing:2,children:[Object(ee.jsx)(d.a,{item:!0,xs:12,children:Object(ee.jsx)(_.a,{autoComplete:"gname",name:"groupName",variant:"outlined",required:!0,fullWidth:!0,id:"groupName",label:e(W.groupName),autoFocus:!0,onChange:this.handleInputChange.bind(this)})}),Object(ee.jsx)(d.a,{item:!0,xs:12,children:Object(ee.jsx)(_.a,{variant:"outlined",required:!0,fullWidth:!0,name:"groupPassword",label:e(W.groupPassword),type:"password",id:"password",autoComplete:"current-password",onChange:this.handleInputChange.bind(this)})}),Object(ee.jsx)(d.a,{item:!0,xs:6,children:Object(ee.jsx)(R.a,{size:"large",variant:"contained",color:"primary",onClick:this.handleFormType.bind(this,L.create),children:e(W.createGroup)})}),Object(ee.jsx)(d.a,{item:!0,xs:6,children:Object(ee.jsx)(R.a,{size:"large",variant:"contained",color:"primary",onClick:this.handleFormType.bind(this,L.join),children:e(W.joinGroup)})})]})})]})}}]),n}(a.a.Component),He=Object(v.a)("")(Ye);function Qe(){return Object(ee.jsxs)(ye.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(ee.jsx)(ze.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}function Xe(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),i=Object(c.a)(s,2),o=i[0],d=i[1],l=Object(r.useState)(""),u=Object(c.a)(l,2),j=u[0],h=u[1],b=Object(r.useState)(""),O=Object(c.a)(b,2),p=O[0],m=O[1],f=Object(r.useState)(""),x=Object(c.a)(f,2),g=x[0],v=x[1],y=Object(r.useState)(L.create),k=Object(c.a)(y,2),w=k[0],S=k[1],T=Object(r.useState)(A.user),U=Object(c.a)(T,2),N=U[0],E=U[1];return Object(r.useEffect)((function(){N===A.submit&&function(){var e={name:n,surname:o,username:""===j?void 0:j,groupName:p,groupPassword:g,signType:w===L.join?"joinGroup":"createGroup"};I.removeUser(),C.signUp(e).then((function(e){console.debug(e.data),I.setUser(e.data),window.location.reload()})).catch((function(e){D(e),E(A.user)}))}()}),[N]),Object(ee.jsxs)(Be.a,{component:"main",maxWidth:"xs",children:[Object(ee.jsx)(qe.a,{}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)(Re.a,{children:Object(ee.jsx)(Je.a,{})}),N===A.user?Object(ee.jsx)(Ke,{SetFirstName:a,SetLastName:d,SetUsername:h,SetStep:E}):Object(ee.jsx)(He,{SetGroupName:m,SetGroupPassword:v,SetFormType:S,SetStep:E})]}),Object(ee.jsx)(ge.a,{mt:5,children:Object(ee.jsx)(Qe,{})})]})}function Ze(){var e=Object(o.a)(),t=e.i18n,n=e.t,r=a.a.useState(t.language),s=Object(c.a)(r,2),i=s[0],d=s[1];return Object(ee.jsx)("div",{children:Object(ee.jsxs)(l.a,{variant:"filled",children:[Object(ee.jsx)(u.a,{id:"translationsSelectLabel",children:F(n(W.language))}),Object(ee.jsx)(j.a,{labelId:"translationsSelectLabel",id:"translationsSelect",value:i,onChange:function(e){var n=e.target.value;t.changeLanguage(n),d(n)},children:[{key:"en",value:"English"},{key:"it",value:"Italiano"}].map((function(e){return Object(ee.jsx)(h.a,{value:e.key,children:e.value},e.key)}))})]})})}var $e=n(249),_e=n(275);function et(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),i=Object(c.a)(s,2),d=i[0],l=i[1],u=Object(r.useState)(N.info),j=Object(c.a)(u,2),h=j[0],b=j[1],O=Object(o.a)().t;return E.init(a,l,b),Object(ee.jsx)(ve.a,{in:n,sx:{position:"fixed",top:0,left:0,right:0},children:Object(ee.jsxs)($e.a,{severity:h,children:[Object(ee.jsx)(_e.a,{children:F(O(h))}),O(d)]})})}function tt(){return I.IsLoggedIn()?Object(ee.jsx)(Ve,{}):Object(ee.jsx)(Xe,{})}var nt=function(){return Object(ee.jsxs)(r.Suspense,{fallback:"loading",children:[Object(ee.jsx)(et,{}),Object(ee.jsx)("div",{className:"App",children:Object(ee.jsxs)(d.a,{container:!0,alignItems:"flex-start",rowSpacing:1,sx:{margin:"5px",maxWidth:"calc(100% - 10px)"},children:[Object(ee.jsx)(d.a,{item:!0,xs:12,container:!0,justifyContent:"flex-end",children:Object(ee.jsx)(Ze,{})}),Object(ee.jsx)(d.a,{item:!0,xs:12,children:Object(ee.jsx)(tt,{})})]})})]})},rt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,277)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),s(e),i(e)}))},at=n(115),st=n(142),it=n(144),ct=n(77);at.a.use(st.a).use(it.a).use(ct.e).init({fallbackLng:"en",debug:!0,detection:{order:["queryString","cookie"],cache:["cookie"]},interpolation:{escapeValue:!1}});at.a;i.a.render(Object(ee.jsx)(a.a.StrictMode,{children:Object(ee.jsx)(nt,{})}),document.getElementById("root")),rt()}},[[198,1,2]]]);
//# sourceMappingURL=main.6819d611.chunk.js.map